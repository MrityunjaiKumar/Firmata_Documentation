<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.16">
  <compounddef id="_firmata_8cpp" kind="file" language="C++">
    <compoundname>Firmata.cpp</compoundname>
    <includes refid="_firmata_8h" local="yes">Firmata.h</includes>
    <includes local="yes">HardwareSerial.h</includes>
    <includes local="no">string.h</includes>
    <includes local="no">stdlib.h</includes>
    <incdepgraph>
      <node id="7">
        <label>FirmataConstants.h</label>
        <link refid="_firmata_constants_8h"/>
      </node>
      <node id="10">
        <label>stdint.h</label>
      </node>
      <node id="15">
        <label>stdlib.h</label>
      </node>
      <node id="3">
        <label>Boards.h</label>
        <link refid="_boards_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>FirmataDefines.h</label>
        <link refid="_firmata_defines_8h"/>
        <childnode refid="7" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>stddef.h</label>
      </node>
      <node id="1">
        <label>Firmata.cpp</label>
        <link refid="_firmata_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
      </node>
      <node id="13">
        <label>HardwareSerial.h</label>
      </node>
      <node id="5">
        <label>WProgram.h</label>
      </node>
      <node id="14">
        <label>string.h</label>
      </node>
      <node id="8">
        <label>FirmataMarshaller.h</label>
        <link refid="_firmata_marshaller_8h"/>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>Firmata.h</label>
        <link refid="_firmata_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
      </node>
      <node id="12">
        <label>FirmataParser.h</label>
        <link refid="_firmata_parser_8h"/>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>Stream.h</label>
      </node>
      <node id="4">
        <label>inttypes.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="var">
      <memberdef kind="variable" id="_firmata_8cpp_1a986c68fac4f21302213e609c277710d7" prot="public" static="no" mutable="no">
        <type><ref refid="classfirmata_1_1_firmata_class" kindref="compound">FirmataClass</ref></type>
        <definition>FirmataClass Firmata</definition>
        <argsstring></argsstring>
        <name>Firmata</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="arduino/Firmata.cpp" line="30" column="14" bodyfile="arduino/Firmata.cpp" bodystart="30" bodyend="-1"/>
        <referencedby refid="class_serial_firmata_1ab31a76a596ce2430ee3feac525da59f2" compoundref="_serial_firmata_8cpp" startline="296" endline="342">SerialFirmata::checkSerial</referencedby>
        <referencedby refid="class_serial_firmata_1af383474fc3a6d1d372489046bbcabc3b" compoundref="_serial_firmata_8cpp" startline="44" endline="50">SerialFirmata::handleCapability</referencedby>
        <referencedby refid="class_serial_firmata_1ace960dd7d082caf65f1f3488a7486ef5" compoundref="_serial_firmata_8cpp" startline="34" endline="42">SerialFirmata::handlePinMode</referencedby>
        <referencedby refid="class_serial_firmata_1a0e13bbb12bd52762cfe2f949bda161ee" compoundref="_serial_firmata_8cpp" startline="52" endline="208">SerialFirmata::handleSysex</referencedby>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/><sp/>Firmata.cpp<sp/>-<sp/>Firmata<sp/>library<sp/>v2.5.8<sp/>-<sp/>2018-04-15</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/><sp/>Copyright<sp/>(c)<sp/>2006-2008<sp/>Hans-Christoph<sp/>Steiner.<sp/><sp/>All<sp/>rights<sp/>reserved.</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/><sp/>Copyright<sp/>(C)<sp/>2009-2017<sp/>Jeff<sp/>Hoefs.<sp/><sp/>All<sp/>rights<sp/>reserved.</highlight></codeline>
<codeline lineno="5"><highlight class="comment"></highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/><sp/>This<sp/>library<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/><sp/>modify<sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>Lesser<sp/>General<sp/>Public</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/><sp/>License<sp/>as<sp/>published<sp/>by<sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/><sp/>version<sp/>2.1<sp/>of<sp/>the<sp/>License,<sp/>or<sp/>(at<sp/>your<sp/>option)<sp/>any<sp/>later<sp/>version.</highlight></codeline>
<codeline lineno="10"><highlight class="comment"></highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/><sp/>See<sp/>file<sp/>LICENSE.txt<sp/>for<sp/>further<sp/>informations<sp/>on<sp/>licensing<sp/>terms.</highlight></codeline>
<codeline lineno="12"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="comment">//*<sp/>Includes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_firmata_8h" kindref="compound">Firmata.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;HardwareSerial.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal"><ref refid="namespacefirmata" kindref="compound">firmata</ref>;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="comment">//*<sp/>Static<sp/>Members</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="comment">//<sp/>make<sp/>one<sp/>instance<sp/>for<sp/>the<sp/>user<sp/>to<sp/>use</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="_firmata_8h_1a2beb89d5a96aa2faa00dad6768a881f4" refkind="member"><highlight class="normal"><ref refid="classfirmata_1_1_firmata_class" kindref="compound">FirmataClass</ref><sp/><ref refid="_firmata_8cpp_1a986c68fac4f21302213e609c277710d7" kindref="member">Firmata</ref>;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>callback<sp/>functions<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref><sp/>FirmataClass::currentAnalogCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref><sp/>FirmataClass::currentDigitalCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref><sp/>FirmataClass::currentPinModeCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref><sp/>FirmataClass::currentPinValueCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref><sp/>FirmataClass::currentReportAnalogCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref><sp/>FirmataClass::currentReportDigitalCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><ref refid="_firmata_8h_1ae8cc4d167596bda9460991674389d15c" kindref="member">stringCallbackFunction</ref><sp/>FirmataClass::currentStringCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1ae8cc4d167596bda9460991674389d15c" kindref="member">stringCallbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><ref refid="_firmata_8h_1a21b9d98a7bff8ee5e96a9ee521618c8c" kindref="member">sysexCallbackFunction</ref><sp/>FirmataClass::currentSysexCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1a21b9d98a7bff8ee5e96a9ee521618c8c" kindref="member">sysexCallbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><ref refid="_firmata_8h_1a3edf3f3c181d5ec58c3deb3e5eb7a933" kindref="member">systemCallbackFunction</ref><sp/>FirmataClass::currentSystemResetCallback<sp/>=<sp/>(<ref refid="_firmata_8h_1a3edf3f3c181d5ec58c3deb3e5eb7a933" kindref="member">systemCallbackFunction</ref>)NULL;</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="comment">//*<sp/>Support<sp/>Functions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="51" refid="classfirmata_1_1_firmata_class_1a770e43f26f18204e43acebf9202a6d39" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a770e43f26f18204e43acebf9202a6d39" kindref="member">FirmataClass::sendValueAsTwo7bitBytes</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>value)</highlight></codeline>
<codeline lineno="52"><highlight class="normal">{</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/>marshaller.encodeByteStream(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(value),<sp/>reinterpret_cast&lt;uint8_t<sp/>*&gt;(&amp;value),<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(value));</highlight></codeline>
<codeline lineno="54"><highlight class="normal">}</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="59" refid="classfirmata_1_1_firmata_class_1a3cc7ea1af348bca3ea0bd570314cada3" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a3cc7ea1af348bca3ea0bd570314cada3" kindref="member">FirmataClass::startSysex</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="60"><highlight class="normal">{</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/>FirmataStream-&gt;write(<ref refid="namespacefirmata_1a8210ab38d9279ef1ea406ff7e1db0893" kindref="member">START_SYSEX</ref>);</highlight></codeline>
<codeline lineno="62"><highlight class="normal">}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="67" refid="classfirmata_1_1_firmata_class_1a9bb68afbb1d37a7990f59a1d419e64c9" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a9bb68afbb1d37a7990f59a1d419e64c9" kindref="member">FirmataClass::endSysex</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="68"><highlight class="normal">{</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/>FirmataStream-&gt;write(<ref refid="namespacefirmata_1aa4c7b2c2365334150eff56b64c87e6e0" kindref="member">END_SYSEX</ref>);</highlight></codeline>
<codeline lineno="70"><highlight class="normal">}</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="comment">//*<sp/>Constructors</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="80" refid="classfirmata_1_1_firmata_class_1a75b035ab8d96d87d28deeb87badfe11a" refkind="member"><highlight class="normal"><ref refid="classfirmata_1_1_firmata_class_1a75b035ab8d96d87d28deeb87badfe11a" kindref="member">FirmataClass::FirmataClass</ref>()</highlight></codeline>
<codeline lineno="81"><highlight class="normal">:</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/>parser(<ref refid="classfirmata_1_1_firmata_parser" kindref="compound">FirmataParser</ref>(parserBuffer,<sp/><ref refid="namespacefirmata_1ad8f1fd3a3919e434ea4d86ce1a39a77e" kindref="member">MAX_DATA_BYTES</ref>))</highlight></codeline>
<codeline lineno="83"><highlight class="normal">{</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/>firmwareVersionCount<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/>firmwareVersionVector<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/>blinkVersionDisabled<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Establish<sp/>callback<sp/>translation<sp/>to<sp/>parser<sp/>callbacks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1aea14613546a585cfec72d5b0f79365ef" kindref="member">ANALOG_MESSAGE</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a40cc69b4997fad3335a34cc083894ea1" kindref="member">FirmataParser::callbackFunction</ref>)staticAnalogCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1a49bf6564630519f4293bd39a71a95b00" kindref="member">DIGITAL_MESSAGE</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a40cc69b4997fad3335a34cc083894ea1" kindref="member">FirmataParser::callbackFunction</ref>)staticDigitalCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1aea1b306b1e7d3751bba41f311b755a99" kindref="member">REPORT_ANALOG</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a40cc69b4997fad3335a34cc083894ea1" kindref="member">FirmataParser::callbackFunction</ref>)staticReportAnalogCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1a00a56f93ad64fa08998b7db2054180a6" kindref="member">REPORT_DIGITAL</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a40cc69b4997fad3335a34cc083894ea1" kindref="member">FirmataParser::callbackFunction</ref>)staticReportDigitalCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1a5ecb59a9641299fcaf2e4ce96587c1f8" kindref="member">SET_PIN_MODE</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a40cc69b4997fad3335a34cc083894ea1" kindref="member">FirmataParser::callbackFunction</ref>)staticPinModeCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1a0a75e8e1855e7dedbbbfd17711f152af" kindref="member">SET_DIGITAL_PIN_VALUE</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a40cc69b4997fad3335a34cc083894ea1" kindref="member">FirmataParser::callbackFunction</ref>)staticPinValueCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1ada4a2133aced1b1051f4663a8365bbc6" kindref="member">STRING_DATA</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a6cee4285d9cd5cdba702b720ae10a9b8" kindref="member">FirmataParser::stringCallbackFunction</ref>)staticStringCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1a8210ab38d9279ef1ea406ff7e1db0893" kindref="member">START_SYSEX</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a9f1b158e9366cdca7f9f743011359b13" kindref="member">FirmataParser::sysexCallbackFunction</ref>)staticSysexCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1a27aae72a38fab1b0b039d7687e294398" kindref="member">REPORT_FIRMWARE</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1a6be4a3c92941c1de63b44918bbbda545" kindref="member">FirmataParser::versionCallbackFunction</ref>)staticReportFirmwareCallback,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1a7aa955ae4335c171096a0224bf279f5b" kindref="member">REPORT_VERSION</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1ad0655dab3f791c7c46c8412ae13f0d3a" kindref="member">FirmataParser::systemCallbackFunction</ref>)staticReportVersionCallback,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a2a472a925ed7e626ed36dee94ceae45e" kindref="member">attach</ref>(<ref refid="namespacefirmata_1abba911f61c8df9fc6f6ea7bf041a22b5" kindref="member">SYSTEM_RESET</ref>,<sp/>(<ref refid="classfirmata_1_1_firmata_parser_1ad0655dab3f791c7c46c8412ae13f0d3a" kindref="member">FirmataParser::systemCallbackFunction</ref>)staticSystemResetCallback,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)NULL);</highlight></codeline>
<codeline lineno="100"><highlight class="normal">}</highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight><highlight class="comment">//*<sp/>Public<sp/>Methods</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="109" refid="classfirmata_1_1_firmata_class_1a2fddcc643892bec2f4aa7aef6dba70eb" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a2fddcc643892bec2f4aa7aef6dba70eb" kindref="member">FirmataClass::begin</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="110"><highlight class="normal">{</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1a2fddcc643892bec2f4aa7aef6dba70eb" kindref="member">begin</ref>(57600);</highlight></codeline>
<codeline lineno="112"><highlight class="normal">}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="121" refid="classfirmata_1_1_firmata_class_1ab0b7b837d2c32b4ce79e62895ced2731" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a2fddcc643892bec2f4aa7aef6dba70eb" kindref="member">FirmataClass::begin</ref>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>speed)</highlight></codeline>
<codeline lineno="122"><highlight class="normal">{</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/>Serial.begin(speed);</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1a9421550f2501fc1df60fd174b154e606" kindref="member">blinkVersion</ref>();</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1a2fddcc643892bec2f4aa7aef6dba70eb" kindref="member">begin</ref>(Serial);</highlight></codeline>
<codeline lineno="126"><highlight class="normal">}</highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="134" refid="classfirmata_1_1_firmata_class_1a0c7b0e10168e3c5dc6442d77c65a156e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a2fddcc643892bec2f4aa7aef6dba70eb" kindref="member">FirmataClass::begin</ref>(Stream<sp/>&amp;s)</highlight></codeline>
<codeline lineno="135"><highlight class="normal">{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/>FirmataStream<sp/>=<sp/>&amp;s;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/>marshaller.<ref refid="classfirmata_1_1_firmata_marshaller_1a5be18ca3658875dbe5580c2254071c76" kindref="member">begin</ref>(s);</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>do<sp/>not<sp/>call<sp/>blinkVersion()<sp/>here<sp/>because<sp/>some<sp/>hardware<sp/>such<sp/>as<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Ethernet<sp/>shield<sp/>use<sp/>pin<sp/>13</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1abd8a0370db6d9e923e7e3d5836e78d7a" kindref="member">printVersion</ref>();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>send<sp/>the<sp/>protocol<sp/>version</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1abe49261eab0bd4892a09fa8b8980b11a" kindref="member">printFirmwareVersion</ref>();<sp/></highlight><highlight class="comment">//<sp/>send<sp/>the<sp/>firmware<sp/>name<sp/>and<sp/>version</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal">}</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="147" refid="classfirmata_1_1_firmata_class_1abd8a0370db6d9e923e7e3d5836e78d7a" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1abd8a0370db6d9e923e7e3d5836e78d7a" kindref="member">FirmataClass::printVersion</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="148"><highlight class="normal">{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/>marshaller.<ref refid="classfirmata_1_1_firmata_marshaller_1a95d58949e32ad285088705dbe5680b29" kindref="member">sendVersion</ref>(<ref refid="_firmata_defines_8h_1afa9a1d1c37c3f731317e30fb878cdd85" kindref="member">FIRMATA_PROTOCOL_MAJOR_VERSION</ref>,<sp/><ref refid="_firmata_defines_8h_1a8a9497c6c1f6dfe9a3b829134bae23ac" kindref="member">FIRMATA_PROTOCOL_MINOR_VERSION</ref>);</highlight></codeline>
<codeline lineno="150"><highlight class="normal">}</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="159" refid="classfirmata_1_1_firmata_class_1a9421550f2501fc1df60fd174b154e606" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a9421550f2501fc1df60fd174b154e606" kindref="member">FirmataClass::blinkVersion</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="160"><highlight class="normal">{</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(VERSION_BLINK_PIN)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(blinkVersionDisabled)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>flash<sp/>the<sp/>pin<sp/>with<sp/>the<sp/>protocol<sp/>version</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/>pinMode(VERSION_BLINK_PIN,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/>strobeBlinkPin(VERSION_BLINK_PIN,<sp/><ref refid="_firmata_defines_8h_1aeab219e509c31f82bf63d465571d06c2" kindref="member">FIRMATA_FIRMWARE_MAJOR_VERSION</ref>,<sp/>40,<sp/>210);</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/>delay(250);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/>strobeBlinkPin(VERSION_BLINK_PIN,<sp/><ref refid="_firmata_defines_8h_1a131668cd19362aee81144d79e0f46451" kindref="member">FIRMATA_FIRMWARE_MINOR_VERSION</ref>,<sp/>40,<sp/>210);</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/>delay(125);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal">}</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="177" refid="classfirmata_1_1_firmata_class_1a5ddba465c3772f841828ef82c79d4307" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a5ddba465c3772f841828ef82c79d4307" kindref="member">FirmataClass::disableBlinkVersion</ref>()</highlight></codeline>
<codeline lineno="178"><highlight class="normal">{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/>blinkVersionDisabled<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="180"><highlight class="normal">}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight></codeline>
<codeline lineno="187" refid="classfirmata_1_1_firmata_class_1abe49261eab0bd4892a09fa8b8980b11a" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1abe49261eab0bd4892a09fa8b8980b11a" kindref="member">FirmataClass::printFirmwareVersion</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="188"><highlight class="normal">{</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(firmwareVersionCount)<sp/>{<sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>that<sp/>the<sp/>name<sp/>has<sp/>been<sp/>set<sp/>before<sp/>reporting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/>marshaller.<ref refid="classfirmata_1_1_firmata_marshaller_1aed71d62cc41f2e0bf3f161894b91be7c" kindref="member">sendFirmwareVersion</ref>(static_cast&lt;uint8_t&gt;(firmwareVersionVector[0]),<sp/>static_cast&lt;uint8_t&gt;(firmwareVersionVector[1]),<sp/>(firmwareVersionCount<sp/>-<sp/>2),<sp/>reinterpret_cast&lt;uint8_t<sp/>*&gt;(&amp;firmwareVersionVector[2]));</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="192"><highlight class="normal">}</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="201" refid="classfirmata_1_1_firmata_class_1ab7aa66b528027566c15b7d64c8cd0f89" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1ab7aa66b528027566c15b7d64c8cd0f89" kindref="member">FirmataClass::setFirmwareNameAndVersion</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/></highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>major,<sp/></highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>minor)</highlight></codeline>
<codeline lineno="202"><highlight class="normal">{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*firmwareName;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*extension;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>parse<sp/>out<sp/>&quot;.cpp&quot;<sp/>and<sp/>&quot;applet/&quot;<sp/>that<sp/>comes<sp/>from<sp/>using<sp/>__FILE__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/>extension<sp/>=<sp/>strstr(name,<sp/></highlight><highlight class="stringliteral">&quot;.cpp&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/>firmwareName<sp/>=<sp/>strrchr(name,<sp/></highlight><highlight class="charliteral">&apos;/&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!firmwareName)<sp/>{</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>windows</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/>firmwareName<sp/>=<sp/>strrchr(name,<sp/></highlight><highlight class="charliteral">&apos;\\&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!firmwareName)<sp/>{</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>user<sp/>passed<sp/>firmware<sp/>name</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/>firmwareName<sp/>=<sp/>name;</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/>firmwareName<sp/>++;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!extension)<sp/>{</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/>firmwareVersionCount<sp/>=<sp/>strlen(firmwareName)<sp/>+<sp/>2;</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/>firmwareVersionCount<sp/>=<sp/>extension<sp/>-<sp/>firmwareName<sp/>+<sp/>2;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>case<sp/>anyone<sp/>calls<sp/>setFirmwareNameAndVersion<sp/>more<sp/>than<sp/>once</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/>free(firmwareVersionVector);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/>firmwareVersionVector<sp/>=<sp/>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>*)<sp/>malloc(firmwareVersionCount<sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/>firmwareVersionVector[firmwareVersionCount]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/>firmwareVersionVector[0]<sp/>=<sp/>major;</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/>firmwareVersionVector[1]<sp/>=<sp/>minor;</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/>strncpy((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)firmwareVersionVector<sp/>+<sp/>2,<sp/>firmwareName,<sp/>firmwareVersionCount<sp/>-<sp/>2);</highlight></codeline>
<codeline lineno="235"><highlight class="normal">}</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight><highlight class="comment">//------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Serial<sp/>Receive<sp/>Handling</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="244" refid="classfirmata_1_1_firmata_class_1a119734b867186567c1cd011e52e59d2d" refkind="member"><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a119734b867186567c1cd011e52e59d2d" kindref="member">FirmataClass::available</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="245"><highlight class="normal">{</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FirmataStream-&gt;available();</highlight></codeline>
<codeline lineno="247"><highlight class="normal">}</highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="252" refid="classfirmata_1_1_firmata_class_1aa698f5f5a234173d5eebb54831350676" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1aa698f5f5a234173d5eebb54831350676" kindref="member">FirmataClass::processInput</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="253"><highlight class="normal">{</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>inputData<sp/>=<sp/>FirmataStream-&gt;read();<sp/></highlight><highlight class="comment">//<sp/>this<sp/>is<sp/>&apos;int&apos;<sp/>to<sp/>handle<sp/>-1<sp/>when<sp/>no<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputData<sp/>!=<sp/>-1)<sp/>{</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a754c97b890b7fd66c8d953a3e615acbf" kindref="member">parse</ref>(inputData);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="258"><highlight class="normal">}</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="264" refid="classfirmata_1_1_firmata_class_1aaeaac8b1f8facf070615b0035120c432" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1aaeaac8b1f8facf070615b0035120c432" kindref="member">FirmataClass::parse</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>inputData)</highlight></codeline>
<codeline lineno="265"><highlight class="normal">{</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a754c97b890b7fd66c8d953a3e615acbf" kindref="member">parse</ref>(inputData);</highlight></codeline>
<codeline lineno="267"><highlight class="normal">}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="272" refid="classfirmata_1_1_firmata_class_1a58e9d787957c3085f22d33b59b1f6ea6" refkind="member"><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a58e9d787957c3085f22d33b59b1f6ea6" kindref="member">FirmataClass::isParsingMessage</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="273"><highlight class="normal">{</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>parser.<ref refid="classfirmata_1_1_firmata_parser_1a67902b70695eaf0cf8f7b06175ca3902" kindref="member">isParsingMessage</ref>();</highlight></codeline>
<codeline lineno="275"><highlight class="normal">}</highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight><highlight class="comment">//------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Output<sp/>Stream<sp/>Handling</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="289" refid="classfirmata_1_1_firmata_class_1ae14e1d8d9bd72068f6e8ca07721e8dda" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1ae14e1d8d9bd72068f6e8ca07721e8dda" kindref="member">FirmataClass::sendAnalog</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>pin,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>value)</highlight></codeline>
<codeline lineno="290"><highlight class="normal">{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/>marshaller.<ref refid="classfirmata_1_1_firmata_marshaller_1a4d9f2d3bb058237404dfe433cfe7571a" kindref="member">sendAnalog</ref>(pin,<sp/>value);</highlight></codeline>
<codeline lineno="292"><highlight class="normal">}</highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>(intentionally<sp/>left<sp/>out<sp/>asterix<sp/>here)</highlight></codeline>
<codeline lineno="295"><highlight class="comment"><sp/>*<sp/>STUB<sp/>-<sp/>NOT<sp/>IMPLEMENTED</highlight></codeline>
<codeline lineno="296"><highlight class="comment"><sp/>*<sp/>Send<sp/>a<sp/>single<sp/>digital<sp/>pin<sp/>value<sp/>to<sp/>the<sp/>Firmata<sp/>host<sp/>application.</highlight></codeline>
<codeline lineno="297"><highlight class="comment"><sp/>*<sp/>@param<sp/>pin<sp/>The<sp/>digital<sp/>pin<sp/>to<sp/>send<sp/>the<sp/>value<sp/>of.</highlight></codeline>
<codeline lineno="298"><highlight class="comment"><sp/>*<sp/>@param<sp/>value<sp/>The<sp/>value<sp/>of<sp/>the<sp/>pin.</highlight></codeline>
<codeline lineno="299"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300" refid="classfirmata_1_1_firmata_class_1a50a87e8339cf46fb787759603603e225" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a50a87e8339cf46fb787759603603e225" kindref="member">FirmataClass::sendDigital</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>pin,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>value)</highlight></codeline>
<codeline lineno="301"><highlight class="normal">{</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/>(void)pin;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/>(void)value;</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>TODO<sp/>add<sp/>single<sp/>pin<sp/>digital<sp/>messages<sp/>to<sp/>the<sp/>protocol,<sp/>this<sp/>needs<sp/>to</highlight></codeline>
<codeline lineno="305"><highlight class="comment"><sp/><sp/><sp/>*<sp/>track<sp/>the<sp/>last<sp/>digital<sp/>data<sp/>sent<sp/>so<sp/>that<sp/>it<sp/>can<sp/>be<sp/>sure<sp/>to<sp/>change<sp/>just</highlight></codeline>
<codeline lineno="306"><highlight class="comment"><sp/><sp/><sp/>*<sp/>one<sp/>bit<sp/>in<sp/>the<sp/>packet.<sp/><sp/>This<sp/>is<sp/>complicated<sp/>by<sp/>the<sp/>fact<sp/>that<sp/>the</highlight></codeline>
<codeline lineno="307"><highlight class="comment"><sp/><sp/><sp/>*<sp/>numbering<sp/>of<sp/>the<sp/>pins<sp/>will<sp/>probably<sp/>differ<sp/>on<sp/>Arduino,<sp/>Wiring,<sp/>and</highlight></codeline>
<codeline lineno="308"><highlight class="comment"><sp/><sp/><sp/>*<sp/>other<sp/>boards.</highlight></codeline>
<codeline lineno="309"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>the<sp/>digital<sp/>message<sp/>should<sp/>not<sp/>be<sp/>sent<sp/>on<sp/>the<sp/>serial<sp/>port<sp/>every</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>time<sp/>sendDigital()<sp/>is<sp/>called.<sp/><sp/>Instead,<sp/>it<sp/>should<sp/>add<sp/>it<sp/>to<sp/>an<sp/>int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>which<sp/>will<sp/>be<sp/>sent<sp/>on<sp/>a<sp/>schedule.<sp/><sp/>If<sp/>a<sp/>pin<sp/>changes<sp/>more<sp/>than<sp/>once</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>before<sp/>the<sp/>digital<sp/>message<sp/>is<sp/>sent<sp/>on<sp/>the<sp/>serial<sp/>port,<sp/>it<sp/>should<sp/>send<sp/>a</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>digital<sp/>message<sp/>for<sp/>each<sp/>change.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>if(value<sp/>==<sp/>0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sendDigitalPortPair();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal">}</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight></codeline>
<codeline lineno="330" refid="classfirmata_1_1_firmata_class_1a799b91e5a888dd21b066a2020d8e2b68" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a799b91e5a888dd21b066a2020d8e2b68" kindref="member">FirmataClass::sendDigitalPort</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>portNumber,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>portData)</highlight></codeline>
<codeline lineno="331"><highlight class="normal">{</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/>marshaller.<ref refid="classfirmata_1_1_firmata_marshaller_1a346dcb4487a51efaa95de42d292ad951" kindref="member">sendDigitalPort</ref>(portNumber,<sp/>portData);</highlight></codeline>
<codeline lineno="333"><highlight class="normal">}</highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight></codeline>
<codeline lineno="342" refid="classfirmata_1_1_firmata_class_1a81e2de5b37eb2372c8a3d9a43d5eb0cc" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a81e2de5b37eb2372c8a3d9a43d5eb0cc" kindref="member">FirmataClass::sendSysex</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>command,<sp/></highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>bytec,<sp/></highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>*bytev)</highlight></codeline>
<codeline lineno="343"><highlight class="normal">{</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/>marshaller.<ref refid="classfirmata_1_1_firmata_marshaller_1ade4f4592877ec0b9f8d6c74e909bad8e" kindref="member">sendSysex</ref>(command,<sp/>bytec,<sp/>bytev);</highlight></codeline>
<codeline lineno="345"><highlight class="normal">}</highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight></codeline>
<codeline lineno="352" refid="classfirmata_1_1_firmata_class_1ab139c0d784e69003c88eb5be8807dcdf" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1abe11f621154afd308926129de349fc6e" kindref="member">FirmataClass::sendString</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>command,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="353"><highlight class="normal">{</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(command<sp/>==<sp/><ref refid="namespacefirmata_1ada4a2133aced1b1051f4663a8365bbc6" kindref="member">STRING_DATA</ref>)<sp/>{</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/>marshaller.<ref refid="classfirmata_1_1_firmata_marshaller_1a483ac2dea885ab3472dc38b99bfdec2f" kindref="member">sendString</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="357"><highlight class="normal">}</highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight></codeline>
<codeline lineno="363" refid="classfirmata_1_1_firmata_class_1abe11f621154afd308926129de349fc6e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1abe11f621154afd308926129de349fc6e" kindref="member">FirmataClass::sendString</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="364"><highlight class="normal">{</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/>marshaller.<ref refid="classfirmata_1_1_firmata_marshaller_1a483ac2dea885ab3472dc38b99bfdec2f" kindref="member">sendString</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="366"><highlight class="normal">}</highlight></codeline>
<codeline lineno="367"><highlight class="normal"></highlight></codeline>
<codeline lineno="373" refid="classfirmata_1_1_firmata_class_1ae8f29a829e17379602fcb9fd6a497807" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1ae8f29a829e17379602fcb9fd6a497807" kindref="member">FirmataClass::write</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>c)</highlight></codeline>
<codeline lineno="374"><highlight class="normal">{</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/>FirmataStream-&gt;write(c);</highlight></codeline>
<codeline lineno="376"><highlight class="normal">}</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a1ae572e88ec810dd49516e53c5f32d2d" kindref="member">FirmataClass::attach</ref>(uint8_t<sp/>command,<sp/>::<ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref><sp/>newFunction)</highlight></codeline>
<codeline lineno="385"><highlight class="normal">{</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(command)<sp/>{</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1aea14613546a585cfec72d5b0f79365ef" kindref="member">ANALOG_MESSAGE</ref>:</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentAnalogCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1a49bf6564630519f4293bd39a71a95b00" kindref="member">DIGITAL_MESSAGE</ref>:</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentDigitalCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1aea1b306b1e7d3751bba41f311b755a99" kindref="member">REPORT_ANALOG</ref>:</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentReportAnalogCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1a00a56f93ad64fa08998b7db2054180a6" kindref="member">REPORT_DIGITAL</ref>:</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentReportDigitalCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1a5ecb59a9641299fcaf2e4ce96587c1f8" kindref="member">SET_PIN_MODE</ref>:</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentPinModeCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1a0a75e8e1855e7dedbbbfd17711f152af" kindref="member">SET_DIGITAL_PIN_VALUE</ref>:</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentPinValueCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="406"><highlight class="normal">}</highlight></codeline>
<codeline lineno="407"><highlight class="normal"></highlight></codeline>
<codeline lineno="413" refid="classfirmata_1_1_firmata_class_1adc3db897058f33e902097ce89bb01bb3" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a1ae572e88ec810dd49516e53c5f32d2d" kindref="member">FirmataClass::attach</ref>(uint8_t<sp/>command,<sp/><ref refid="_firmata_8h_1a3edf3f3c181d5ec58c3deb3e5eb7a933" kindref="member">systemCallbackFunction</ref><sp/>newFunction)</highlight></codeline>
<codeline lineno="414"><highlight class="normal">{</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(command)<sp/>{</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1abba911f61c8df9fc6f6ea7bf041a22b5" kindref="member">SYSTEM_RESET</ref>:</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentSystemResetCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="420"><highlight class="normal">}</highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight></codeline>
<codeline lineno="427" refid="classfirmata_1_1_firmata_class_1a074887a70f9aca0c0aae7e9bdc103f77" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a1ae572e88ec810dd49516e53c5f32d2d" kindref="member">FirmataClass::attach</ref>(uint8_t<sp/>command,<sp/><ref refid="_firmata_8h_1ae8cc4d167596bda9460991674389d15c" kindref="member">stringCallbackFunction</ref><sp/>newFunction)</highlight></codeline>
<codeline lineno="428"><highlight class="normal">{</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(command)<sp/>{</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1ada4a2133aced1b1051f4663a8365bbc6" kindref="member">STRING_DATA</ref>:</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentStringCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="434"><highlight class="normal">}</highlight></codeline>
<codeline lineno="435"><highlight class="normal"></highlight></codeline>
<codeline lineno="441" refid="classfirmata_1_1_firmata_class_1a78e360c0c8d70cffeb9c935fdec23f77" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a1ae572e88ec810dd49516e53c5f32d2d" kindref="member">FirmataClass::attach</ref>(uint8_t<sp/>command,<sp/><ref refid="_firmata_8h_1a21b9d98a7bff8ee5e96a9ee521618c8c" kindref="member">sysexCallbackFunction</ref><sp/>newFunction)</highlight></codeline>
<codeline lineno="442"><highlight class="normal">{</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/>(void)command;</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/>currentSysexCallback<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="445"><highlight class="normal">}</highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight></codeline>
<codeline lineno="452" refid="classfirmata_1_1_firmata_class_1a5db0faee74b9291d1b783d2dde0929d1" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a5db0faee74b9291d1b783d2dde0929d1" kindref="member">FirmataClass::detach</ref>(uint8_t<sp/>command)</highlight></codeline>
<codeline lineno="453"><highlight class="normal">{</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(command)<sp/>{</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1abba911f61c8df9fc6f6ea7bf041a22b5" kindref="member">SYSTEM_RESET</ref>:</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1a1ae572e88ec810dd49516e53c5f32d2d" kindref="member">attach</ref>(command,<sp/>(<ref refid="_firmata_8h_1a3edf3f3c181d5ec58c3deb3e5eb7a933" kindref="member">systemCallbackFunction</ref>)NULL);</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1ada4a2133aced1b1051f4663a8365bbc6" kindref="member">STRING_DATA</ref>:</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1a1ae572e88ec810dd49516e53c5f32d2d" kindref="member">attach</ref>(command,<sp/>(<ref refid="_firmata_8h_1ae8cc4d167596bda9460991674389d15c" kindref="member">stringCallbackFunction</ref>)NULL);</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespacefirmata_1a8210ab38d9279ef1ea406ff7e1db0893" kindref="member">START_SYSEX</ref>:</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1a1ae572e88ec810dd49516e53c5f32d2d" kindref="member">attach</ref>(command,<sp/>(<ref refid="_firmata_8h_1a21b9d98a7bff8ee5e96a9ee521618c8c" kindref="member">sysexCallbackFunction</ref>)NULL);</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classfirmata_1_1_firmata_class_1a1ae572e88ec810dd49516e53c5f32d2d" kindref="member">attach</ref>(command,<sp/>(<ref refid="_firmata_8h_1ac1d919f56c49d2e9559967b3b950e504" kindref="member">callbackFunction</ref>)NULL);</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="468"><highlight class="normal">}</highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight></codeline>
<codeline lineno="474" refid="classfirmata_1_1_firmata_class_1a0c434227456ce2ba97b3b1142c329f96" refkind="member"><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a0c434227456ce2ba97b3b1142c329f96" kindref="member">FirmataClass::getPinMode</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>pin)</highlight></codeline>
<codeline lineno="475"><highlight class="normal">{</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pinConfig[pin];</highlight></codeline>
<codeline lineno="477"><highlight class="normal">}</highlight></codeline>
<codeline lineno="478"><highlight class="normal"></highlight></codeline>
<codeline lineno="486" refid="classfirmata_1_1_firmata_class_1a32c41dd94c1d23aa0e6d3d1dbe5c0c04" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1a32c41dd94c1d23aa0e6d3d1dbe5c0c04" kindref="member">FirmataClass::setPinMode</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>pin,<sp/></highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>config)</highlight></codeline>
<codeline lineno="487"><highlight class="normal">{</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pinConfig[pin]<sp/>==<sp/><ref refid="namespacefirmata_1ac10cf5b5b05ab1b1277d98c82c1fb8d1" kindref="member">PIN_MODE_IGNORE</ref>)</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/>pinConfig[pin]<sp/>=<sp/>config;</highlight></codeline>
<codeline lineno="492"><highlight class="normal">}</highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight></codeline>
<codeline lineno="498" refid="classfirmata_1_1_firmata_class_1acf5d4f460b9a2298653d4a71de918dfe" refkind="member"><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1acf5d4f460b9a2298653d4a71de918dfe" kindref="member">FirmataClass::getPinState</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>pin)</highlight></codeline>
<codeline lineno="499"><highlight class="normal">{</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pinState[pin];</highlight></codeline>
<codeline lineno="501"><highlight class="normal">}</highlight></codeline>
<codeline lineno="502"><highlight class="normal"></highlight></codeline>
<codeline lineno="509" refid="classfirmata_1_1_firmata_class_1aa9f98ba5069823b4c1d08db9f8999ba8" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classfirmata_1_1_firmata_class_1aa9f98ba5069823b4c1d08db9f8999ba8" kindref="member">FirmataClass::setPinState</ref>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>pin,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>state)</highlight></codeline>
<codeline lineno="510"><highlight class="normal">{</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/>pinState[pin]<sp/>=<sp/>state;</highlight></codeline>
<codeline lineno="512"><highlight class="normal">}</highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight><highlight class="comment">//<sp/>sysex<sp/>callbacks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="516"><highlight class="comment"><sp/>*<sp/>this<sp/>is<sp/>too<sp/>complicated<sp/>for<sp/>analogReceive,<sp/>but<sp/>maybe<sp/>for<sp/>Sysex?</highlight></codeline>
<codeline lineno="517"><highlight class="comment"><sp/>void<sp/>FirmataClass::attachSysex(sysexFunction<sp/>newFunction)</highlight></codeline>
<codeline lineno="518"><highlight class="comment"><sp/>{</highlight></codeline>
<codeline lineno="519"><highlight class="comment"><sp/>byte<sp/>i;</highlight></codeline>
<codeline lineno="520"><highlight class="comment"><sp/>byte<sp/>tmpCount<sp/>=<sp/>analogReceiveFunctionCount;</highlight></codeline>
<codeline lineno="521"><highlight class="comment"><sp/>analogReceiveFunction*<sp/>tmpArray<sp/>=<sp/>analogReceiveFunctionArray;</highlight></codeline>
<codeline lineno="522"><highlight class="comment"><sp/>analogReceiveFunctionCount++;</highlight></codeline>
<codeline lineno="523"><highlight class="comment"><sp/>analogReceiveFunctionArray<sp/>=<sp/>(analogReceiveFunction*)<sp/>calloc(analogReceiveFunctionCount,<sp/>sizeof(analogReceiveFunction));</highlight></codeline>
<codeline lineno="524"><highlight class="comment"><sp/>for(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>tmpCount;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="525"><highlight class="comment"><sp/>analogReceiveFunctionArray[i]<sp/>=<sp/>tmpArray[i];</highlight></codeline>
<codeline lineno="526"><highlight class="comment"><sp/>}</highlight></codeline>
<codeline lineno="527"><highlight class="comment"><sp/>analogReceiveFunctionArray[tmpCount]<sp/>=<sp/>newFunction;</highlight></codeline>
<codeline lineno="528"><highlight class="comment"><sp/>free(tmpArray);</highlight></codeline>
<codeline lineno="529"><highlight class="comment"><sp/>}</highlight></codeline>
<codeline lineno="530"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="531"><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"></highlight><highlight class="comment">//*<sp/>Private<sp/>Methods</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"></highlight><highlight class="comment">//******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>FirmataClass::strobeBlinkPin(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>pin,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>count,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>onInterval,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>offInterval)</highlight></codeline>
<codeline lineno="545"><highlight class="normal">{</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>i;</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>count;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(offInterval);</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(pin,<sp/>HIGH);</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(onInterval);</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(pin,<sp/>LOW);</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="553"><highlight class="normal">}</highlight></codeline>
<codeline lineno="554"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="arduino/Firmata.cpp"/>
  </compounddef>
</doxygen>
